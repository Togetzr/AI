{
  "version": "3.1",
  "data_api_version":"3.0",
  "routing_model": {
    "CUSTOMER_INFO":["QUESTION_ONE"],
    "QUESTION_ONE": ["BOOKING_INFO"]
  },
  "screens": [
    {
      "id": "CUSTOMER_INFO",
      "title": "Customer Info",
      "data": {},
      "layout": {
        "type": "SingleColumnLayout",
        "children": [
          {
            "type": "Form",
            "name": "flow_path",
            "children": [
              {
                "type":"Dropdown",
                "label": "Title",
                "required": true,
                "name": "gender",
                "data-source": [
                    {
                        "id":"male",
                        "title":"Monsieur"
                    },
                    {
                        "id":"female",
                        "title":"Madame"
                    }
                ]
              },
              {
                "type": "TextInput",
                "name": "name",
                "label": "Name",
                "required": true,
                "input-type": "text"
              },
              {
                "type": "TextInput",
                "name": "family_name",
                "label": "Family Name",
                "required": true,
                "input-type": "text"
              },
              {
                "type": "TextInput",
                "name": "phone",
                "label": "Phone",
                "required": true,
                "input-type": "phone"
              },
              {
                "type": "Footer",
                "label": "Continue",
                "on-click-action": {
                  "name": "data_exchange",
                  "payload": {
                    "gender":"${form.gender}",
                    "name":"${form.name}",
                    "family_name":"${form.family_name}",
                    "phone":"${form.phone}"
                  }
                }
              }
            ]
          }
        ]
      }
    },
    {
      "id": "QUESTION_ONE",
      "title": "Select Services",
      "data": {
        "gender": {
          "type": "string",
          "__example__": "Example"
        },
        "name": {
          "type": "string",
          "__example__": "Example"
        },
        "family_name": {
          "type": "string",
          "__example__": "Example"
        },
        "phone": {
          "type": "string",
          "__example__": "Example"
        },
        "resourse_source":{
          "type": "array",
          "items": {
                "type": "object",
                "properties": {
                  "id": {
                    "type": "string"
                  },
                  "title": {
                    "type": "string"
                  }
                }
              },
              "__example__": [
                {
                  "id": "1",
                  "title": "08:00"
                },
                {
                  "id": "2",
                  "title": "09:00"
                }
              ]
            },
        "services_source":{
          "type": "array",
          "items": {
                "type": "object",
                "properties": {
                  "id": {
                    "type": "string"
                  },
                  "title": {
                    "type": "string"
                  }
                }
              },
              "__example__": [
                {
                  "id": "1",
                  "title": "08:00"
                },
                {
                  "id": "2",
                  "title": "09:00"
                }
              ]
            }
      },
      "layout": {
        "type": "SingleColumnLayout",
        "children": [
          {
            "type": "Form",
            "name": "flow_path",
            "children": [
              {
                "type": "Dropdown",
                "label": "Nom du coiffeur",
                "required": false,
                "name": "resourse",
                "data-source": "${data.resourse_source}",
                "on-select-action": {
                  "name": "data_exchange",
                  "payload": {
                    "gender":"${data.gender}",
                    "name":"${data.name}",
                    "family_name":"${data.family_name}",
                    "phone":"${data.phone}",
                    "component_action": "update_resource",
                    "resourse":"${form.resourse}"
                  }
                }
              },
              {
                "type": "Dropdown",
                "label": "Services",
                "required": true,
                "name": "services",
                "data-source": "${data.services_source}"
              },
              {
                "type": "Footer",
                "label": "Continue",
                "on-click-action": {
                  "name": "data_exchange",
                  "payload": {
                    "name":"${data.name}",
                    "gender":"${data.gender}",
                    "family_name":"${data.family_name}",
                    "phone":"${data.phone}",
                    "resourse":"${form.resourse}",
                    "services":"${form.services}"
                  }
                }
              }
            ]
          }
        ]
      }
    },
    {
      "id": "BOOKING_INFO",
      "title": "Informations",
      "terminal": true,
      "data": {
        "name": {
          "type": "string",
          "__example__": "Example"
        },
        "gender": {
          "type": "string",
          "__example__": "Example"
        },
        "family_name": {
          "type": "string",
          "__example__": "Example"
        },
        "phone": {
          "type": "string",
          "__example__": "Example"
        },
        "resourse": {
          "type": "string",
          "__example__": "Example"
        },
        "services": {
          "type": "string",
          "__example__": "Example"
        },
        "date_source":{
          "type": "array",
          "items": {
                "type": "object",
                "properties": {
                  "id": {
                    "type": "string"
                  },
                  "title": {
                    "type": "string"
                  }
                }
              },
              "__example__": [
                {
                  "id": "1",
                  "title": "08:00"
                },
                {
                  "id": "2",
                  "title": "09:00"
                }
              ]
            },
        "time_source":{
          "type": "array",
          "items": {
                "type": "object",
                "properties": {
                  "id": {
                    "type": "string"
                  },
                  "title": {
                    "type": "string"
                  }
                }
              },
              "__example__": [
                {
                  "id": "1",
                  "title": "08:00"
                },
                {
                  "id": "2",
                  "title": "09:00"
                }
              ]
            }
      },
      "layout": {
        "type": "SingleColumnLayout",
        "children": [
          {
            "type": "Form",
            "name": "flow_path",
            "children": [
              {
                "type": "Dropdown",
                "name": "appointment",
                "label": "Date",
                "required": true,
                "data-source": "${data.date_source}",
                "on-select-action": {
                  "name": "data_exchange",
                  "payload": {
                    "name":"${data.name}",
                    "gender":"${data.gender}",
                    "family_name":"${data.family_name}",
                    "phone":"${data.phone}",
                    "resourse":"${data.resourse}",
                    "services":"${data.services}",
                    "appointment": "${form.appointment}",
                    "component_action": "update_date"
                  }
                }
              },
              {
                "type": "Dropdown",
                "name": "appointment_time",
                "label": "Time",
                "required": true,
                "data-source": "${data.time_source}"
              },
              {
                "type": "Footer",
                "label": "Continue",
                "on-click-action": {
                  "name": "complete",
                  "payload": {
                    "name":"${data.name}",
                    "gender":"${data.gender}",
                    "family_name":"${data.family_name}",
                    "phone":"${data.phone}",
                    "resourse":"${data.resourse}",
                    "services":"${data.services}",
                    "appointment": "${form.appointment}",
                    "appointment_time": "${form.appointment_time}"
                  }
                }
              }
            ]
          }
        ]
      }
    }
    
  ]
}

