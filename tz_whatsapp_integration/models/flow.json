{
  "version": "3.1",
  "data_api_version":"3.0",
  "routing_model": {
    "QUESTION_ONE": ["BOOKING_INFO"],
    "BOOKING_INFO":["CUSTOMER_INFO"]
  },
  "screens": [
    {
      "id": "QUESTION_ONE",
      "title": "Select Services",
      "data": {},
      "layout": {
        "type": "SingleColumnLayout",
        "children": [
          {
            "type": "Form",
            "name": "flow_path",
            "children": [
              {
                "type": "Dropdown",
                "label": "Nom du coiffeur",
                "required": true,
                "name": "chair_id",
                "data-source": [
                  {
                    "id": "1",
                    "title": "Oliver"
                  }
                ]
              },
              {
                "type": "CheckboxGroup",
                "label": "Services",
                "required": true,
                "name": "services",
                "data-source": [
                  {
                    "id": "1",
                    "title": "Hair Cut 30 min 18 €"
                  },
                  {
                    "id": "2",
                    "title": "Hair Wash 10 min 8 €"
                  },
                  {
                    "id": "5",
                    "title": "Shave 20 min 12 €"
                  }
                ]
              },
              {
                "type": "Footer",
                "label": "Continue",
                "on-click-action": {
                  "name": "data_exchange",
                  "payload": {
                    "chair_id":"${form.chair_id}",
                    "services": "${form.services}"
                  }
                }
              }
            ]
          }
        ]
      }
    },
    {
      "id": "BOOKING_INFO",
      "title": "Informations",
      "data": {
        "chair_id": {
          "type": "string",
          "__example__": "Example"
        },
        "services": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "__example__": []
        },
        "min_date":{
            "type": "string",
            "__example__": ""
        },
        "max_date":{
            "type": "string",
            "__example__": ""
        },
        "data_source":{
          "type": "array",
          "items": {
                "type": "object",
                "properties": {
                  "id": {
                    "type": "string"
                  },
                  "title": {
                    "type": "string"
                  }
                }
              },
              "__example__": [
                {
                  "id": "1",
                  "title": "08:00"
                },
                {
                  "id": "2",
                  "title": "09:00"
                }
              ]
            }
      },
      "layout": {
        "type": "SingleColumnLayout",
        "children": [
          {
            "type": "Form",
            "name": "flow_path",
            "children": [
              {
                "type": "DatePicker",
                "name": "appointment",
                "label": "Date",
                "min-date":"${data.min_date}",
                "max-date":"${data.max_date}",
                "required": true,
                "on-select-action": {
                  "name": "data_exchange",
                  "payload": {
                    "date": "${form.appointment}",
                    "chair_id":"${data.chair_id}",
                    "services": "${data.services}",
                    "component_action": "update_date"
                  }
                }
              },
              {
                "type": "Dropdown",
                "name": "appointment_time",
                "label": "Time",
                "required": true,
                "data-source": "${data.data_source}"
              },
              {
                "type": "Footer",
                "label": "Continue",
                "on-click-action": {
                  "name": "navigate",
                  "next": {
                    "type": "screen",
                    "name": "CUSTOMER_INFO"
                  },
                  "payload": {
                    "chair_id":"${data.chair_id}",
                    "services": "${data.services}",
                    "appointment": "${form.appointment}",
                    "appointment_time": "${form.appointment_time}"
                  }
                }
              }
            ]
          }
        ]
      }
    },
    {
      "id": "CUSTOMER_INFO",
      "title": "Customer Info",
      "data": {
        "chair_id": {
          "type": "string",
          "__example__": "Example"
        },
        "services": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "__example__": []
        },
        "appointment": {
          "type": "string",
          "__example__": "Example"
        },
        "appointment_time": {
          "type": "string",
          "__example__": "Example"
        }
      },
      "terminal": true,
      "layout": {
        "type": "SingleColumnLayout",
        "children": [
          {
            "type": "Form",
            "name": "flow_path",
            "children": [
              {
                "type": "TextInput",
                "name": "name",
                "label": "Name",
                "required": true,
                "input-type": "text"
              },
              {
                "type": "TextInput",
                "name": "family_name",
                "label": "Family Name",
                "required": true,
                "input-type": "text"
              },
              {
                "type": "TextInput",
                "name": "email",
                "label": "Email",
                "required": false,
                "input-type": "email"
              },
              {
                "type": "Footer",
                "label": "Continue",
                "on-click-action": {
                  "name": "complete",
                  "payload": {
                    "chair_id":"${data.chair_id}",
                    "services": "${data.services}",
                    "appointment": "${data.appointment}",
                    "appointment_time": "${data.appointment_time}",
                    "name":"${form.name}",
                    "family_name":"${form.family_name}",
                    "email":"${form.email}"
                  }
                }
              }
            ]
          }
        ]
      }
    }
  ]
}

