{
  "version": "3.1",
  "data_api_version":"3.0",
  "routing_model": {
    "CUSTOMER_INFO":["QUESTION_ONE","BOOKING_INFO"],
    "QUESTION_ONE": ["BOOKING_INFO"]
  },
  "screens": [
    {
      "id": "CUSTOMER_INFO",
      "title": "Customer Info",
      "data": {
        "title":{
            "type":"string",
            "__example__":""
        },
        "name":{
            "type":"string",
            "__example__":""
        },
        "family_name":{
            "type":"string",
            "__example__":""
        },
        "phone":{
            "type":"string",
            "__example__":""
        },
        "last_booking_error_visible":{
            "type": "boolean",
            "__example__": true
        },
        "name_required":{
            "type": "boolean",
            "__example__": false
        },
        "name_visible":{
            "type": "boolean",
            "__example__": false
        },
        "last_booking_required":{
            "type": "boolean",
            "__example__": false
        },
        "last_booking_visible":{
            "type": "boolean",
            "__example__": false
        },
        "last_booking_error":{
            "type":"string",
            "__example__":""
        },
        "last_bookings":{
          "type": "array",
          "items": {
                "type": "object",
                "properties": {
                  "id": {
                    "type": "string"
                  },
                  "title": {
                    "type": "string"
                  }
                }
              },
              "__example__": [
                {
                  "id": "0",
                  "title": "No Bookings Here"
                }
              ]
            },
        "init_values":{
            "type": "object",
            "properties": {
                "name": {
                    "type": "string"
                  },
                "value": {
                    "type": "string"
                  }
            },
          "__example__": {
              "name": "0",
              "value": "No Bookings Here"
            }
        }
      },
      "layout": {
        "type": "SingleColumnLayout",
        "children": [
          {
            "type": "Form",
            "name": "flow_path",
            "init-values":"${data.init_values}",
            "children": [
              {
                "type":"Dropdown",
                "label": "Nom du coiffeur",
                "required": true,
                "name": "booking_type",
                "data-source": [
                    {
                        "id":"self",
                        "title":"Your Self"
                    },
                    {
                        "id":"other",
                        "title":"For Someone Else"
                    }
                ],
                "on-select-action": {
                  "name": "data_exchange",
                  "payload": {
                    "component_action": "update_booking_type",
                    "booking_type":"${form.booking_type}"
                  }
                }
              },
              {
                "type": "TextInput",
                "name": "name",
                "label": "Name",
                "required": "${data.name_required}",
                "visible":"${data.name_visible}",
                "input-type": "text"
              },
              {
                "type": "TextInput",
                "name": "family_name",
                "label": "Family Name",
                "required": "${data.name_required}",
                "visible":"${data.name_visible}",
                "input-type": "text"
              },
              {
                "type": "TextInput",
                "name": "phone",
                "label": "Phone",
                "required": "${data.name_required}",
                "visible":"${data.name_visible}",
                "input-type": "phone"
              },
              {
                "type": "CheckboxGroup",
                "label": "Last Bookings",
                "required": "${data.last_booking_required}",
                "visible":"${data.last_booking_visible}",
                "name": "last_booking",
                "data-source": "${data.last_bookings}"
              },
              {
                "type": "Footer",
                "label": "Continue",
                "enabled":"${data.last_booking_error_visible}",
                "on-click-action": {
                  "name": "data_exchange",
                  "payload": {
                    "name":"${form.name}",
                    "family_name":"${form.family_name}",
                    "phone":"${form.phone}",
                    "last_booking":"${form.last_booking}"
                  }
                }
              }
            ]
          }
        ]
      }
    },
    {
      "id": "QUESTION_ONE",
      "title": "Select Services",
      "data": {
        "name": {
          "type": "string",
          "__example__": "Example"
        },
        "family_name": {
          "type": "string",
          "__example__": "Example"
        },
        "phone": {
          "type": "string",
          "__example__": "Example"
        },
        "last_booking": {
          "type": "string",
          "__example__": "Example"
        },
        "resourse_source":{
          "type": "array",
          "items": {
                "type": "object",
                "properties": {
                  "id": {
                    "type": "string"
                  },
                  "title": {
                    "type": "string"
                  }
                }
              },
              "__example__": [
                {
                  "id": "1",
                  "title": "08:00"
                },
                {
                  "id": "2",
                  "title": "09:00"
                }
              ]
            },
        "services_source":{
          "type": "array",
          "items": {
                "type": "object",
                "properties": {
                  "id": {
                    "type": "string"
                  },
                  "title": {
                    "type": "string"
                  }
                }
              },
              "__example__": [
                {
                  "id": "1",
                  "title": "08:00"
                },
                {
                  "id": "2",
                  "title": "09:00"
                }
              ]
            }
      },
      "layout": {
        "type": "SingleColumnLayout",
        "children": [
          {
            "type": "Form",
            "name": "flow_path",
            "children": [
              {
                "type": "Dropdown",
                "label": "Nom du coiffeur",
                "required": false,
                "name": "resourse",
                "data-source": "${data.resourse_source}",
                "on-select-action": {
                  "name": "data_exchange",
                  "payload": {
                    "name":"${data.name}",
                    "family_name":"${data.family_name}",
                    "phone":"${data.phone}",
                    "component_action": "update_resource",
                    "resourse":"${form.resourse}"
                  }
                }
              },
              {
                "type": "Dropdown",
                "label": "Services",
                "required": true,
                "name": "services",
                "data-source": "${data.services_source}"
              },
              {
                "type": "Footer",
                "label": "Continue",
                "on-click-action": {
                  "name": "data_exchange",
                  "payload": {
                    "name":"${data.name}",
                    "family_name":"${data.family_name}",
                    "phone":"${data.phone}",
                    "resourse":"${form.resourse}",
                    "services":"${form.services}"
                  }
                }
              }
            ]
          }
        ]
      }
    },
    {
      "id": "BOOKING_INFO",
      "title": "Informations",
      "terminal": true,
      "data": {
        "name": {
          "type": "string",
          "__example__": "Example"
        },
        "family_name": {
          "type": "string",
          "__example__": "Example"
        },
        "phone": {
          "type": "string",
          "__example__": "Example"
        },
        "last_booking": {
          "type": "string",
          "__example__": "Example"
        },
        "resourse": {
          "type": "string",
          "__example__": "Example"
        },
        "services": {
          "type": "string",
          "__example__": "Example"
        },
        "date_source":{
          "type": "array",
          "items": {
                "type": "object",
                "properties": {
                  "id": {
                    "type": "string"
                  },
                  "title": {
                    "type": "string"
                  }
                }
              },
              "__example__": [
                {
                  "id": "1",
                  "title": "08:00"
                },
                {
                  "id": "2",
                  "title": "09:00"
                }
              ]
            },
        "time_source":{
          "type": "array",
          "items": {
                "type": "object",
                "properties": {
                  "id": {
                    "type": "string"
                  },
                  "title": {
                    "type": "string"
                  }
                }
              },
              "__example__": [
                {
                  "id": "1",
                  "title": "08:00"
                },
                {
                  "id": "2",
                  "title": "09:00"
                }
              ]
            }
      },
      "layout": {
        "type": "SingleColumnLayout",
        "children": [
          {
            "type": "Form",
            "name": "flow_path",
            "children": [
              {
                "type": "Dropdown",
                "name": "appointment",
                "label": "Date",
                "required": true,
                "data-source": "${data.date_source}",
                "on-select-action": {
                  "name": "data_exchange",
                  "payload": {
                    "name":"${data.name}",
                    "family_name":"${data.family_name}",
                    "phone":"${data.phone}",
                    "resourse":"${data.resourse}",
                    "services":"${data.services}",
                    "appointment": "${form.appointment}",
                    "component_action": "update_date"
                  }
                }
              },
              {
                "type": "Dropdown",
                "name": "appointment_time",
                "label": "Time",
                "required": true,
                "data-source": "${data.time_source}"
              },
              {
                "type": "Footer",
                "label": "Continue",
                "on-click-action": {
                  "name": "complete",
                  "payload": {
                    "name":"${data.name}",
                    "family_name":"${data.family_name}",
                    "phone":"${data.phone}",
                    "resourse":"${data.resourse}",
                    "services":"${data.services}",
                    "appointment": "${form.appointment}",
                    "appointment_time": "${form.appointment_time}"
                  }
                }
              }
            ]
          }
        ]
      }
    }
    
  ]
}

